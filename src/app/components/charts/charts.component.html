<div class="charts-wrapper">

  <!-- <button (click)="CaptureEvent($event)" type="button" class="edit-button">Edit Dashboard</button>

  <div class="numberofempoyees">
    <h5>Total number of employees: {{ numberOfEmployees }}</h5>
  </div> -->
  <!--<div *ngIf="showUpdateForm" class="chart-wrapper">
    <div class="chart-item">
      <canvas baseChart [datasets]="[{ data: activeChart.data, label: activeChart.name }]" [labels]="activeChart.labels"
        [options]="activeChart.labels" [type]="activeChart.type"></canvas>
    </div>
    <div class="report-controls">
      <button class="back-button" (click)="clearActiveChart()">Back to Dashboard</button>
      <button class="generate-report-button" (click)="generateReport()" *ngIf="!showReport">Generate Report</button>
      <button class="update-button" (click)="openUpdateForm()">Update</button>
      <button class="delete-button" (click)="deleteChart(activeChart.id)">Delete</button>
    </div>
  </div> -->
  <div id="chart-container" *ngIf="showUpdateForm">
    <div class="row pt-4">
      <div class="col-8" style="max-height: 40vh;">
        <!-- Show chart -->
        <div id="edit-chart-container">
          <canvas baseChart [datasets]='chartCanvasArray[selectedChartIndex]'
          [labels]="activeChart.type == 'bar'? activeChart.dataTypes : activeChart.labels"
          [type]="activeChart.type"></canvas>
        </div>
      </div>
      <div class="col-4">
        <div class="row pe-4">
          <h3>Update Chart</h3>
          <div class="row">
            <div class="col-12">
              <!-- <label class="" for="Name">Chart Name:</label>
              <input type="text" id="Name" name="Name" [(ngModel)]="updateFormData.Name"> -->
              <mat-form-field appearance="outline" style="width: 100%;">
                <mat-label>Chart Name</mat-label>
                <input matInput [(ngModel)]="updateFormData.name">
              </mat-form-field>
            </div>
            <div class="col-12">
              <mat-radio-group aria-label="Chart Type" [(ngModel)]="updateFormData.type">
                <mat-radio-button value='bar'>Bar</mat-radio-button>
                <mat-radio-button value='line'>Line</mat-radio-button>
                <mat-radio-button value='pie'>Pie</mat-radio-button>
                <mat-radio-button value='doughnut'>Doughnut</mat-radio-button>
              </mat-radio-group>
            </div>
            <div class="col-12 mt-3 justify-content" id="edit-controls">
              <button mat-button id="cancel-button" (click)="showUpdateForm = false">Cancel</button>
              <button mat-button id="save-button" (click)="updateChart()">Save changes</button>
            </div>
            <div class="report-controls">
              <!-- <label for="chartType">Chart Type:</label>
              <select id="chartType" name="chartType" [(ngModel)]="updateFormData.Type">
                <option value="bar">Bar</option>
                <option value="line">Line</option>
                <option value="pie">Pie</option>
                <option value="doughnut">Doughnut</option>
              </select> -->

              <!-- <button type="submit" class="update-button">Update Chart</button>
              <button type="button" class="cancel-button" (click)="showUpdateForm = false">Cancel</button> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <app-report *ngIf="showReport" [chartData]="activeChart"></app-report>
  <!--<div *ngIf="!activeChart" class="chart-container">
     <div *ngFor="let chart of chartData;" class="chart-item" (click)="onChartClick(chart)">
      <canvas
        baseChart
        [datasets]="[{ data: chart.data, label: chart.name }]"
        [labels]="chart.labels"
        [options]="chart.labels"
        [type]="chart.type"
      ></canvas>
    </div> 
  </div>-->
  <div class="row" id="chart-container" *ngIf="!showUpdateForm">
    <div class="col-3 mx-1 border" *ngFor="let chart of chartData;index as i" id="chart-item">
      <div id="chart-header" class="row p-4">
        <div class="col-10">
          <h2>{{chart.name}}</h2>
        </div>
        <div class="col-2" id="chart-icon">
          <button mat-button [matMenuTriggerFor]="menu" id="options-trigger">
            <mat-icon id="menu-icon">more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item>
              <mat-icon id="chart-icon-menu" class="pe-3">keyboard_backspace</mat-icon> Download graph
            </button>
            <button mat-menu-item>
              <mat-icon class="pe-3" (click)="generateReport()">arrow_forward_ios</mat-icon> Export as graph
            </button>
            <button mat-menu-item (click)="editChart(i)">
              <mat-icon class="pe-3">edit</mat-icon> Edit graph
            </button>
            <button mat-menu-item  (click)="deleteChart(i)">
              <mat-icon class="pe-3">delete_outline</mat-icon> Delete graph
            </button>
            <button mat-menu-item>
              <mat-icon class="pe-3">remove_red_eye</mat-icon> Hide Filters
            </button>
          </mat-menu>
        </div>
      </div>
      <div id="chart-body" class="row mt-4 pt-4">
        <div id="canvas-container">
          <canvas baseChart [datasets]='chartCanvasArray[i]'
          [labels]="chart.type == 'bar'? chart.dataTypes : chart.labels" [type]="chart.type"></canvas>
        </div>
      </div>
      <div id="chart-footer">

      </div>
    </div>
  </div>
  <!-- <div *ngIf="showUpdateForm" class="update-form">
    <h3>Update Chart</h3>
    <form (submit)="updateChart()">
      <label for="Name">Chart Name:</label>
      <input type="text" id="Name" name="Name" [(ngModel)]="updateFormData.Name">

      <div class="report-controls">
        <label for="chartType">Chart Type:</label>
        <select id="chartType" name="chartType" [(ngModel)]="updateFormData.Type">
          <option value="bar">Bar</option>
          <option value="line">Line</option>
          <option value="pie">Pie</option>
          <option value="doughnut">Doughnut</option>
        </select>

        <button type="submit" class="update-button">Update Chart</button>
        <button type="button" class="cancel-button" (click)="showUpdateForm = false">Cancel</button>
      </div>
    </form>
  </div> -->
</div>