<!-- <div class="col-12" id="accordion-container">
  <mat-accordion id="accordion" class="row">
    <mat-expansion-panel class="mt-3 rounded-3" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Contact Details
        </mat-panel-title>
        <mat-panel-description *ngIf="contactFormProgress != 100" class="pe-0 pe-md-5">
          <mat-icon class="mx-1">error</mat-icon><span class="d-none d-md-block d-lg-block"> Missing information</span>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <form [formGroup]="employeeContactForm">
        <div class="col-12 mb-2 d-flex justify-content-end">
          <button *ngIf="!editContact" mat-button id="edit-button" (click)="editContactDetails()"
            [ngClass]="screenWidth <= 767 ?'col-12':''">
            <mat-icon>edit</mat-icon>Edit Details</button>
        </div>
        <div class="row">
          <div class="col-12">
            <div class="row">
              <div *ngIf="sharedPropertyAccessService.employeeProfilePermissions.personalEmail"
                class="col-12 col-md-6 my-2">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Personal Email</mat-label>
                  <input matInput formControlName="personalEmail">
                  <mat-error *ngIf="employeeContactForm.controls['personalEmail'].hasError('required')">
                    Personal email is required</mat-error>
                  <mat-error
                    *ngIf="employeeContactForm.controls['personalEmail'].hasError('pattern') && !employeeContactForm.controls['personalEmail'].hasError('required')">
                    This is not a valid email</mat-error>
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeProfilePermissions.email" class="col-12 col-md-6 my-2">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Work email</mat-label>
                  <input matInput formControlName="email">
                  <mat-error *ngIf="employeeContactForm.controls['email'].hasError('required')"> Work
                    email is required</mat-error>
                  <mat-error
                    *ngIf="employeeContactForm.controls['email'].hasError('pattern') && !employeeContactForm.controls['email'].hasError('required')">
                    Work email must end with @retrorabbit.co.za </mat-error>
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeProfilePermissions.cellphoneNo"
                class="col-12 col-md-6 my-2">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Cellphone Number</mat-label>
                  <input matInput formControlName="cellphoneNo">
                  <mat-error *ngIf="employeeContactForm.controls['cellphoneNo'].hasError('required')">
                    Cellphone number is required</mat-error>
                  <mat-error
                    *ngIf="employeeContactForm.controls['cellphoneNo'].hasError('pattern') && !employeeContactForm.controls['cellphoneNo'].hasError('required')">
                    Cell Phone number must only contain numbers</mat-error>
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeProfilePermissions.houseNo" class="col-12 col-md-6 my-2">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Home Number</mat-label>
                  <input matInput formControlName="houseNo">
                  <mat-error *ngIf="employeeContactForm.controls['houseNo'].hasError('required')">
                    Home number is required</mat-error>
                  <mat-error
                    *ngIf="employeeContactForm.controls['houseNo'].hasError('pattern') && !employeeContactForm.controls['cellphoneNo'].hasError('required')">
                    Home number must only contain numbers</mat-error>
                </mat-form-field>
              </div>
              <div class="col-12">
                <h3 [ngStyle]="{'color' : editPersonal ? 'black' :'grey'}">Emergency Contact
                </h3>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeProfilePermissions.emergencyContactName"
                class="col-12 col-md-6 my-2">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Emergency contact name</mat-label>
                  <input matInput formControlName="emergencyContactName">
                  <mat-error *ngIf="employeeContactForm.controls['emergencyContactName'].hasError('required')">
                    Emergency contact name is required</mat-error>
                  <mat-error
                    *ngIf="employeeContactForm.controls['emergencyContactName'].hasError('pattern') && !employeeContactForm.controls['emergencyContactName'].hasError('required')">
                    Contact name must not contain numbers</mat-error>
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeProfilePermissions.emergencyContactNo"
                class="col-12 col-md-6 my-2">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Emergency contact number</mat-label>
                  <input matInput formControlName="emergencyContactNo">
                  <mat-error *ngIf="employeeContactForm.controls['emergencyContactNo'].hasError('required')">
                    Emergency contact number is required</mat-error>
                  <mat-error
                    *ngIf="employeeContactForm.controls['emergencyContactNo'].hasError('pattern') && !employeeContactForm.controls['emergencyContactName'].hasError('required')">
                    Contact number must only contain numbers</mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="col-12 d-none d-md-flex" id="edit-buttons">
            <button *ngIf="editContact" mat-button id="cancel-button" (click)="cancelContactEdit()">
              Cancel
            </button>
            <button *ngIf="editContact" mat-button id="save-button" type="submit" (click)="saveContactEdit()">
              Save changes
            </button>
          </div>
          <div class="col-12 d-block d-md-none" id="edit-buttons">
            <button *ngIf="editContact" mat-button id="save-button" type="submit" class="col-12 mb-2"
              (click)="saveContactEdit()">
              Save changes
            </button>
            <button *ngIf="editContact" mat-button id="cancel-button" class="col-12" (click)="cancelContactEdit()">
              Cancel
            </button>
          </div>
        </div>
      </form>
    </mat-expansion-panel>
    <mat-expansion-panel class="mt-3 rounded-3" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Address Details
        </mat-panel-title>
        <mat-panel-description *ngIf="addressFormProgress != 100" class="pe-0 pe-md-5">
          <mat-icon class="mx-1">error</mat-icon><span class="d-none d-md-block d-lg-block"> Missing information</span>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <form [formGroup]="addressDetailsForm">
        <div class="col-12 mb-2 d-flex justify-content-end">
          <button *ngIf="!editAddress" mat-button id="edit-button" (click)="editAddressDetails()"
            [ngClass]="screenWidth <= 767 ?'col-12':''">
            <mat-icon>edit</mat-icon>Edit Details
          </button>
        </div>
        <div class="row">
          <div class="col-12">
            <div class="row">
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.unitNumber" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Unit Number</mat-label>
                  <input matInput formControlName="physicalUnitNumber">
                  <mat-error *ngIf="addressDetailsForm.controls['physicalUnitNumber'].hasError('required')">
                    Unit number is required</mat-error>
                  <mat-error
                    *ngIf="addressDetailsForm.controls['physicalUnitNumber'].hasError('pattern') && !addressDetailsForm.controls['physicalUnitNumber'].hasError('required')">
                    Unit number must only contain numbers</mat-error>
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.complexName" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Complex Name</mat-label>
                  <input matInput formControlName="physicalComplexName">
                  <mat-error *ngIf="addressDetailsForm.controls['physicalComplexName'].hasError('required')">Complex
                    name is required</mat-error>
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.suburbOrDistrict"
                class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Suburb/District</mat-label>
                  <input matInput formControlName="physicalSuburb">
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.streetNumber" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Street Number</mat-label>
                  <input matInput formControlName="physicalStreetNumber">
                  <mat-error *ngIf="addressDetailsForm.controls['physicalStreetNumber'].hasError('required')">
                    Street number is required</mat-error>
                  <mat-error
                    *ngIf="addressDetailsForm.controls['physicalStreetNumber'].hasError('pattern') && !addressDetailsForm.controls['physicalStreetNumber'].hasError('required')">
                    Street Number must only contain numbers</mat-error>
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.city" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>City/Town</mat-label>
                  <input matInput formControlName="physicalCity">
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.country" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Country</mat-label>
                  <mat-select formControlName="physicalCountry" hideSingleSelectionIndicator="true">
                    <mat-option *ngFor="let country of filteredCountries" [value]="country">
                      {{ country }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.province" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Province</mat-label>
                  <mat-select formControlName="physicalProvince" hideSingleSelectionIndicator="true">
                    <mat-option *ngFor="let province of provinces" [value]="province">
                      {{province}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.postalCode" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Postal Code</mat-label>
                  <input matInput formControlName="physicalPostalCode">
                  <mat-error *ngIf="addressDetailsForm.controls['physicalPostalCode'].hasError('required')">
                    Postal code is required</mat-error>
                  <mat-error
                    *ngIf="addressDetailsForm.controls['physicalPostalCode'].hasError('pattern') && !addressDetailsForm.controls['physicalPostalCode'].hasError('required')">
                    Postal code should contain only number</mat-error>
                </mat-form-field>
              </div>
              <div class="col-12">

              </div>
              <div class="col-12">
                <mat-checkbox inputId="checkbox" value="Postal address is same as physical address"
                  (change)="toggleEqualFields()" [disabled]="!editAddress">
                </mat-checkbox>
                <label class="ms-1" for="checkbox" [ngClass]="editAddress === false ? 'disabled-text-address' : ''">Is
                  the postal address the same as the physical
                  address?</label>
              </div>
            </div>
            <div *ngIf="!physicalEqualPostal" class="row mt-4">
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.unitNumber" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Unit Number</mat-label>
                  <input matInput formControlName="postalUnitNumber">
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.complexName" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Complex Name</mat-label>
                  <input matInput formControlName="postalComplexName">
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.suburbOrDistrict"
                class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Suburb/District</mat-label>
                  <input matInput formControlName="postalSuburb">
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.streetNumber" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Street Number</mat-label>
                  <input matInput formControlName="postalStreetNumber">
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.city" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>City/Town</mat-label>
                  <input matInput formControlName="postalCity">
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.country" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Country</mat-label>
                  <mat-select formControlName="postalCountry" hideSingleSelectionIndicator="true">
                    <mat-option *ngFor="let country of filteredCountries" [value]="country">
                      {{ country }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.province" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Province</mat-label>
                  <mat-select formControlName="postalProvince" hideSingleSelectionIndicator="true">
                    <mat-option *ngFor="let province of provinces" [value]="province">
                      {{province}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div *ngIf="sharedPropertyAccessService.employeeAddressPermissions.postalCode" class="col-12 col-md-6">
                <mat-form-field appearance="outline" style="width: 100%;">
                  <mat-label>Postal Code</mat-label>
                  <input matInput formControlName="postalPostalCode">
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="col-12 d-block d-md-none" id="edit-buttons">
            <button *ngIf="editAddress" mat-button id="save-button" type="submit" (click)="saveAddressEdit()"
              class="col-12 mb-2">
              Save changes
            </button>
            <button *ngIf="editAddress" mat-button id="cancel-button" (click)="cancelAddressEdit()" class="col-12">
              Cancel
            </button>
          </div>
          <div class="col-12 d-none d-md-flex" id="edit-buttons">
            <button *ngIf="editAddress" mat-button id="cancel-button" (click)="cancelAddressEdit()">
              Cancel
            </button>
            <button *ngIf="editAddress" mat-button id="save-button" type="submit" (click)="saveAddressEdit()">
              Save changes
            </button>
          </div>
        </div>
      </form>
    </mat-expansion-panel>
    <mat-expansion-panel class="mt-3 rounded-3" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Additional Information
        </mat-panel-title>
        <mat-panel-description *ngIf="additionalFormProgress != 100" class="pe-0 pe-md-5">
          <mat-icon class="mx-1">error</mat-icon><span class="d-none d-md-block d-lg-block"> Missing information</span>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <form [formGroup]="additionalInfoForm">
        <div class="col-12 mb-2 d-flex justify-content-end">
          <button *ngIf="!editAdditional" mat-button id="edit-button" (click)="editAdditionalDetails()"
            [ngClass]="screenWidth <= 767 ?'col-12':''">
            <mat-icon>edit</mat-icon>Edit
            Details</button>
        </div>
        <div class="row">
          <div class="col-12 row">
            <div class="col-12 col-md-6 my-2" *ngFor="let fieldcode of customFields">
              <mat-form-field appearance="outline" style="width: 100%;">
                <mat-label>{{fieldcode.name}}</mat-label>
                <div *ngIf="fieldcode.type == fieldTypes[4].id">
                  <mat-select formControlName="{{fieldcode.code}}" hideSingleSelectionIndicator="true">
                    <mat-option *ngFor="let option of fieldcode.options" [value]="option.option">
                      {{option.option}}
                    </mat-option>
                  </mat-select>
                </div>
                <div *ngIf="fieldcode.type != fieldTypes[4].id">
                  <input matInput formControlName="{{fieldcode.code}}">
                </div>
              </mat-form-field>
            </div>
          </div>
          <div class="col-12 d-block d-md-none" id="edit-buttons">
            <button *ngIf="editAdditional" mat-button id="save-button" type="submit" (click)="saveAdditionalEdit"
              class="col-12 mb-2">
              Save changes
            </button>
            <button *ngIf="editAdditional" mat-button id="cancel-button" (click)="cancelAdditionalEdit()"
              class="col-12">
              Cancel
            </button>
          </div>
          <div class="col-12 d-none d-md-flex" id="edit-buttons">
            <button *ngIf="editAdditional" mat-button id="cancel-button" (click)="cancelAdditionalEdit()">
              Cancel
            </button>
            <button *ngIf="editAdditional" mat-button id="save-button" type="submit" (click)="saveAdditionalEdit()">
              Save changes
            </button>
          </div>
        </div>
      </form>
    </mat-expansion-panel>
  </mat-accordion>
</div> -->
